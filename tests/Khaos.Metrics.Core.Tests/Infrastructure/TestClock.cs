using System;using System.Diagnostics;namespace Khaos.Metrics.Core.Tests.Infrastructure;internal sealed class TestClock : ISystemClock{    private DateTimeOffset _now;    private long _timestampTicks;    public TestClock(DateTimeOffset? start = null)    {        _now = start ?? DateTimeOffset.UtcNow;    }    public DateTimeOffset Now => _now;    public long TimestampTicks => _timestampTicks;    public void Advance(TimeSpan amount)    {        _now += amount;        _timestampTicks += ToStopwatchTicks(amount);    }    public static long ToStopwatchTicks(TimeSpan duration)        => (long)(duration.TotalSeconds * Stopwatch.Frequency);}
